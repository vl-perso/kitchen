<!doctype html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><link rel="alternate" type="application/rss+xml" title="" href="https://vl-kitchen.netlify.com//feed.xml"><link rel="stylesheet" href="/css/main.css"><title>Where is the build process? - VL Kitchen</title><meta property="og:site_name" content="VL Kitchen"><meta property="og:title" content="Where is the build process? - VL Kitchen"><meta property="og:type" content="website"><meta property="og:url" content="https://vl-kitchen.netlify.com//posts/no-build-process/"><meta name="description" content="Supermaya wraps all the build processes into Eleventy itself."><meta name="twitter:description" content="Supermaya wraps all the build processes into Eleventy itself."><meta property="og:description" content="Supermaya wraps all the build processes into Eleventy itself."><style>:root{--THEME_COLOR:black;--THEME_TEXT:white}</style></head><body><a class="visually-hidden skip-content" href="#main-content">Skip to content</a><div class="l-page"><div class="l-container"><header class="l-site-head"><a href="/" class="invert-link"><span class="l-site-name"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" style="max-width:200px" fill="none" viewBox="0 0 42 42"><circle cx="21" cy="21" r="16" stroke="currentColor" stroke-width="10"></circle></svg> <span class="l-site-title site-title">VL Kitchen</span></span></a><nav><ul class="l-navigation navigation" aria-label=""><li><a href="/">Entr√©e</a></li><li><a href="/posts">Cuisine</a></li><li><a href="https://twitter.com/webetcaetera" rel="external">Twitter</a></li><li><a href="/feed.xml" rel="external">RSS</a></li></ul></nav></header></div><main id="main-content" tabindex="-1"><div class="l-stack l-stack--large"><div class="l-stack"><article class="h-entry t-page"><div class="l-stack l-stack--large"><header class="l-container"><div class="l-post-intro"><h1>Where is the build process?</h1><div><div class="l-stack"><p class="post-description">Supermaya wraps all the build processes into Eleventy itself.</p><p class="post-meta"><time datetime="2019-10-31" class="dt-published">2019-10-31</time> (about a 3 minute read).</p></div></div></div></header><div class="l-container"><div class="l-stack"><p>A lot of modern sites rely on tools like Sass and Babel to transpile CSS and JavaScript. They usually require build tools like Gulp or Webpack to trigger this and most larger sites have additional build steps that do anything from fetching data, to minify code, to optimise images or almost anything else.</p><p>When you add static site generators to this, things can get a little weird. Most static site generators have a development server that watches for changes and will rebuild the site as needed. They are often smart and will only rebuild pages that have changed. You can end up with situations where the site generator rebuilds multiple times as each of the build steps is run.</p><p>This results in complex build processes where multiple passes are required and sometimes it takes several minutes just to generate a few pages. This isn't fun and trying to get them to work together can be a lot of effort.</p><p>Supermaya avoids these pitfalls by wrapping all the build processes into Eleventy itself.</p><p>Eleventy has <a href="https://www.11ty.io/docs/data-global/">global data files</a> that allow asynchronous fetching and resolution of data before each build as well as <a href="https://www.11ty.io/docs/config/#transforms">transforms</a> that can completely modify the output of generated HTML.</p><p>Supermaya makes use of both these features to compile Sass, Webpack JavaScript files, Generate Critical CSS, as well as minify and optimise content.</p><h2 id="heading-css">CSS <a href="#heading-css" class="heading-permalink"><span class="visually-hidden">permalink</span> <svg focusable="false" aria-hidden="true" fill="currentColor" width="1ch" height="1ex" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>In Supermaya SCSS files are compiled on-the-fly and added to global data. This means you can write inline CSS directly into templates and partials like this: <code>&lt;style&gt;{{css["compilation-target"] | safe}}&lt;/style&gt;</code>. Where <em>"compilation-target"</em> is the key added to the list of SCSS files to compile in the data file:</p><pre><code>site/_data/css.js
</code></pre><p>Each entry in the <code>targets</code> array will also be available as a static file will written to the path <code>/css/[compilation-target].css</code>.</p><p>Source files for <code>scss</code> can be found in the directory <code>site/src/scss</code>.</p><h2 id="heading-javascript">JavaScript <a href="#heading-javascript" class="heading-permalink"><span class="visually-hidden">permalink</span> <svg focusable="false" aria-hidden="true" fill="currentColor" width="1ch" height="1ex" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>Similar to the CSS, JavaScript in Supermaya are also compiled on-the-fly and added to global data.</p><p>This is done with Babel and Webpack. The Webpack configuration contains a loader for <code>.js</code> files that will transpile from ES6 to ES5 meaning you can safely write modern JavaScript. The Webpack configuration can be extended or modified in: <code>site/utils/compile-webpack.js</code>.</p><p>Files generated by Webpack are added to site data so you can write inline JavaScript in templates and partials like this: <code>&lt;script&gt;{{css["output-filename"] | safe}}&lt;/script&gt;</code>. The "output-filename" should be the full name of a file generated by Webpack including the extension.</p><p>You can add additional entry points by modifying the <code>targets</code> array in:</p><pre><code>site/_data/js.js
</code></pre><p>Each file generated will also be available as a static file at the path: <code>js/[output-filename]</code>.</p><p>Source files for javascript have been added to the directory <code>site/src/js</code>.</p><h2 id="heading-critical-css">Critical CSS <a href="#heading-critical-css" class="heading-permalink"><span class="visually-hidden">permalink</span> <svg focusable="false" aria-hidden="true" fill="currentColor" width="1ch" height="1ex" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2><p>Supermaya is capable of generating criticalCSS although, for performance reasons, this is turned off by default. You can turn this feature on by modifying:</p><pre><code>site/_data/site.js
</code></pre></div></div></div></article><div class="l-container"><footer class="l-stack"><h2>Tags</h2><div class="l-post-footer"><ul class="l-post-tags"><li><a class="post-tag" href="/tags/demo-content">demo-content</a></li><li><a class="post-tag" href="/tags/sample-post">sample-post</a></li><li><a class="post-tag" href="/tags/blog">blog</a></li></ul><div class="l-stack"><div id="keystone-claps-form"></div><script src="/js/keystone-claps.js" async="" defer=""></script><style>.clap-button{position:relative;width:82px;height:82px;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;border-radius:50%;border:solid 2px #767676;cursor:pointer;background:#fff}.clap-button>svg{width:40px;flex-shrink:0;flex-basis:40px;margin:4px}.heart{position:absolute;top:-50%;transform:rotate(-45deg)}.heart:before{position:absolute;top:-50%;left:0;display:block;content:"";width:100%;height:100%;background:inherit;border-radius:100%}.heart:after{position:absolute;top:0;right:-50%;display:block;content:"";width:100%;height:100%;background:inherit;border-radius:100%}@keyframes love{100%{top:-100%;opacity:.2}}.clap-button:focus{background:#eaeaea}.clap-button:hover{background:#eaeaea}.clap-button:hover .heart{width:10px;height:10px;left:50%;top:50%;z-index:-1;background:#ccc;animation:love 5s infinite}.clap-button:hover .heart-1{width:10px;height:10px}.clap-button:hover .heart-2{width:5px;height:5px;left:40%;animation:love 4s infinite;animation-delay:1s}.clap-button:hover .heart-3{width:8px;height:8px;left:70%;animation:love 6s infinite;animation-delay:2s}.clap-button:hover .heart-4{width:9px;height:9px;left:90%;animation:love 6s infinite;animation-delay:1s}.clap-button:hover .heart-4{width:5px;height:5px;left:20%;animation:love 4s infinite;animation-delay:1.5s}.show-some-love{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;min-width:200px;font-size:.71429rem}</style><div id="keystone-bookmarks-form"></div><script src="/js/keystone-bookmarks.js" async="" defer=""></script><style>.l-bookmark-button{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;min-width:200px;font-size:.71429rem}.bookmark-button{position:relative;width:82px;height:82px;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;border-radius:50%;border:solid 2px #767676;cursor:pointer;background:#fff}.bookmark-button>svg{width:40px;flex-shrink:0;flex-basis:40px;margin:4px}.bookmark-button:focus,.bookmark-button:hover{background:#eaeaea}.bookmark-button--bookmarked{background:#eaeaea}.bookmark-button--bookmarked:focus,.bookmark-button--bookmarked:hover{background:#fff}</style></div></div></footer></div></div><div class="l-container"><style>.l-comment-name{display:flex;align-items:center}.l-comment-name>*+*{margin-left:1rem}.keystone-comments{list-style:none}.keystone-comments>*+*{margin-top:1rem}.keystone-comment{border:solid 1px #ccc;padding:1rem}.comment-date{color:#767676;font-size:.71429rem}.l-comment-meta{display:flex;flex-direction:column}.js-keystone-comment-form>*+*{margin-top:1rem}</style><div class="l-stack"><div id="keystone-comments" class="l-stack"></div><hr><div id="keystone-comments-form" class="l-stack"></div><script src="/js/keystone-comments.js" async="" defer=""></script></div></div></div><footer role="contentinfo"><div class="theme"><div class="l-container"><div class="l-site-footer"><div class="l-site-footer-split"><div class="l-stack"><div class="l-site-name l-site-name--footer"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" style="max-width:200px" fill="none" viewBox="0 0 42 42"><circle cx="21" cy="21" r="16" stroke="currentColor" stroke-width="10"></circle></svg><div class="l-site-title site-title">VL Kitchen</div></div><p>Des recettes en direct de la cuisine</p></div><div class="l-footer-nav"><div><ul class="l-navigation navigation" aria-label=""><li><a href="/">Entr√©e</a></li><li><a href="/posts">Cuisine</a></li><li><a href="https://twitter.com/webetcaetera" rel="external">Twitter</a></li><li><a href="/feed.xml" rel="external">RSS</a></li></ul></div></div></div><p class="powered-by">Made by VL with 11ty</p></div></div></div></footer></main></div><script type="text/javascript" src="/js/service-worker.js"></script><script type="text/javascript" src="/js/main.js"></script></body></html>