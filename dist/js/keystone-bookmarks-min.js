!function(n){var e={};function t(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=n,t.c=e,t.d=function(n,e,o){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:o})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)t.d(o,r,function(e){return n[e]}.bind(null,r));return o},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=12)}({0:function(n,e,t){"use strict";t.d(e,"c",(function(){return o})),t.d(e,"b",(function(){return r})),t.d(e,"d",(function(){return a})),t.d(e,"a",(function(){return i}));var o=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://keystone-blog-enrichment.herokuapp.com/admin/api",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({variables:e,query:n})}).then((function(n){return n.json()})).catch((function(n){return console.log(n)}))},r=function(){return o("\n    {\n      authenticatedUser {\n        id\n        name\n        bookmarks {\n          id\n          path\n          name\n        }\n      }\n    }\n  ").then((function(n){return!(!n||!n.data)&&n.data.authenticatedUser}))},a=function(n){return n.every((function(n){return""!==n.value}))},i=function(n,e){return o(n,e).then((function(n){var e=n.data;return e?e.allPages?e.allPages[0]||{}:e.allComments?{comments:e.allComments}:e.addComment?e.addComment:e.clap?e.clap:e:{}}))}},12:function(n,e,t){"use strict";t.r(e);var o=t(0),r=t(4),a=t.n(r),i=t(5),u=t.n(i);Object(o.b)().then((function(n){if(n){var e=function(e){var o=window.document.querySelector("#keystone-bookmarks-form");if(o){var i=n.id,c=document.createElement("form"),l=!!e&&e.find((function(n){return n.path===window.location.pathname})),s=l;c.innerHTML='\n      <input type="hidden" name="user" value="'.concat(i,'"/>\n      ').concat(s?'<input type="hidden" name="bookmark" value="'.concat(l.id,'"/>'):"",'\n      <div class="l-bookmark-button">\n        <button type="submit" class="bookmark-button">\n          ').concat(s?u.a:a.a,"\n        </button>\n        <p>").concat(s?"Remove from reading list":"Add to reading list","</p>\n      </div>\n      "),c.classList.add("js-bookmark-form");var d=s?r:t;c.addEventListener("submit",d),o.appendChild(c)}},t=function(n){n.preventDefault();var t=n.target.elements.user;Object(o.c)("\nmutation Bookmark($path: String!, $pageTitle: String, $user: ID!) {\n  addBookmark(path: $path, pageTitle: $pageTitle, user: $user) {\n    id,\n    bookmarks {\n      id,\n      path\n    }\n  }\n}",{path:window.location.pathname,pageTitle:document.title,user:t.value}).then((function(n){var t=n.data.addBookmark.bookmarks;window.document.querySelector("#keystone-bookmarks-form").innerHTML="",e(t)}))},r=function(n){n.preventDefault();var t=n.target.elements,r=t.user,a=t.bookmark;Object(o.c)("\nmutation removeBookmark($user: ID!, $bookmark: ID!){\n  updateUser(id: $user, data: { bookmarks: {disconnect:{id: $bookmark}}}) {\n    bookmarks {\n      id\n      path\n    }\n  }\n}\n",{bookmark:a.value,user:r.value}).then((function(n){var t=n.data.updateUser.bookmarks;window.document.querySelector("#keystone-bookmarks-form").innerHTML="",e(t)}))};if(n){var i=n.bookmarks;e(i),function(n){var e=window.document.querySelector("#keystone-bookmarks-list");e&&n&&n.length&&(e.innerHTML='\n        <section class="l-container">\n         <div class="l-stack">\n          <h2 class="h3">Your reading list</h2>\n            <ul>\n            '.concat(n.map((function(n){return'<li><a href="'.concat(n.path,'">').concat(n.name,"</a></li>")})),"\n            </ul>\n          </div>\n        </section>\n        "))}(i)}}})).catch((function(n){console.log(n)}))},4:function(n,e){n.exports='<svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" style="max-width:200px" viewBox="0 0 32 32"><path fill="currentColor" d="M9 4v24l7-6 7 6V4H9zm12 19.652l-5-4.286-5 4.286V6h10v17.652z" class="linesandangles_een"></path></svg>'},5:function(n,e){n.exports='<svg focusable="false" aria-hidden="true" style="max-width:200px" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 4V28L16 22L23 28V4H9ZM21 23.652L16 19.366L11 23.652V6H21V23.652Z" fill="black"></path><line x1="13" y1="11" x2="19" y2="11" stroke="black" stroke-width="2"></line></svg>'}});
//# sourceMappingURL=keystone-bookmarks.js.map